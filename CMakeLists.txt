cmake_minimum_required(VERSION 3.20)
project(minesweeper)

set(CMAKE_C_COMPTLER CLANG)
include_directories(${PROJECT_SOURCE_DIR}/include)
aux_source_directory(${PROJECT_SOURCE_DIR}/src SRC_LIST)
set(EXECUTABLE_OUTPUT_PATH ${PROJECT_SOURCE_DIR}/build)
add_executable(minesweeper ${SRC_LIST})
set(LINKER_SCRIPT "rv-linker.lds")
target_compile_options(minesweeper PUBLIC -Wall -Wshadow -fno-omit-frame-pointer -fsanitize=address -fsanitize=undefined)
# target_compile_options(minesweeper PUBLIC --target=riscv32-unknown-unknown -march=rv32im -ffreestanding -fno-builtin -nostdlib  -mno-relax -fno-PIE -G=0 -Oz -flto)
target_link_options(minesweeper PUBLIC -fno-omit-frame-pointer -fsanitize=address -fsanitize=undefined)
# target_link_options(minesweeper PUBLIC -T ${CMAKE_SOURCE_DIR}/${LINKER_SCRIPT} --target=riscv32-unknown-unknown -march=rv32im -ffreestanding -fno-builtin -nostdlib  -mno-relax -fno-PIE -G=0 -Oz -flto)
target_compile_definitions(minesweeper PUBLIC NORMAL)
